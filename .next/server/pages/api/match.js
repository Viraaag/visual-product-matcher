"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/match";
exports.ids = ["pages/api/match"];
exports.modules = {

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("formidable");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmatch&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cmatch.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmatch&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cmatch.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_match_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\match.js */ \"(api)/./pages/api/match.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_match_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_match_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/match\",\n        pathname: \"/api/match\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_match_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm1hdGNoJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNtYXRjaC5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNtRDtBQUNuRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsZ0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGdEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpc3VhbC1wcm9kdWN0LW1hdGNoZXIvPzIwMjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxtYXRjaC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL21hdGNoXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbWF0Y2hcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmatch&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cmatch.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/match.js":
/*!****************************!*\
  !*** ./pages/api/match.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(formidable__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_3__);\n// pages/api/match.js\n// Add near the top of /pages/api/match.js\nasync function getEmbeddingFromHuggingFace(imageUrl) {\n    const response = await fetch(\"https://api-inference.huggingface.co/pipeline/feature-extraction/openai/clip-vit-base-patch32\", {\n        headers: {\n            Authorization: `Bearer ${process.env.HUGGINGFACE_TOKEN}`\n        },\n        method: \"POST\",\n        body: JSON.stringify({\n            inputs: imageUrl\n        })\n    });\n    const result = await response.json();\n    if (Array.isArray(result)) return result[0]; // normalized embedding\n    throw new Error(\"Invalid embedding response\");\n}\n\n\n\n\n// Disable Next.js default body parser\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n// Helper: cosine similarity between 2 vectors\nfunction cosineSimilarity(a, b) {\n    const dot = a.reduce((sum, ai, i)=>sum + ai * b[i], 0);\n    const normA = Math.sqrt(a.reduce((sum, ai)=>sum + ai * ai, 0));\n    const normB = Math.sqrt(b.reduce((sum, bi)=>sum + bi * bi, 0));\n    return dot / (normA * normB);\n}\nasync function handler(req, res) {\n    if (req.method !== \"POST\") return res.status(405).json({\n        error: \"Only POST method allowed\"\n    });\n    const contentType = req.headers[\"content-type\"] || \"\";\n    // Load precomputed embeddings\n    const embeddingsPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\", \"embeddings.json\");\n    const productsPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\", \"products.json\");\n    const embeddings = JSON.parse(await fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(embeddingsPath, \"utf8\"));\n    const products = JSON.parse(await fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(productsPath, \"utf8\"));\n    // Handle file upload\n    if (contentType.includes(\"multipart/form-data\")) {\n        const form = new (formidable__WEBPACK_IMPORTED_MODULE_0___default().IncomingForm)();\n        try {\n            const { files } = await new Promise((resolve, reject)=>{\n                form.parse(req, (err, fields, files)=>{\n                    if (err) reject(err);\n                    else resolve({\n                        files\n                    });\n                });\n            });\n            const file = files.image[0] || files.image;\n            const tempPath = file.filepath;\n            // Run Python script to get embedding for uploaded image\n            const embedding = await getPythonEmbedding(tempPath);\n            // Compare with dataset\n            const results = rankSimilarities(embedding, embeddings, products);\n            return res.status(200).json({\n                results\n            });\n        } catch (e) {\n            console.error(e);\n            return res.status(500).json({\n                error: \"Failed to process upload\"\n            });\n        }\n    } else {\n        // Handle image URL\n        const body = await new Promise((resolve)=>{\n            let data = \"\";\n            req.on(\"data\", (chunk)=>data += chunk);\n            req.on(\"end\", ()=>resolve(JSON.parse(data || \"{}\")));\n        });\n        const { imageUrl } = body;\n        if (!imageUrl) return res.status(400).json({\n            error: \"imageUrl missing\"\n        });\n        const embedding = await getEmbeddingFromHuggingFace(imageUrl);\n        const results = rankSimilarities(embedding, embeddings, products);\n        return res.status(200).json({\n            results,\n            queryImage: imageUrl\n        });\n    }\n}\n// Helper: spawn Python to compute query embedding\nasync function getPythonEmbedding(input, isUrl = false) {\n    return new Promise((resolve, reject)=>{\n        const script = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"python_embed_query.py\");\n        const args = isUrl ? [\n            \"--url\",\n            input\n        ] : [\n            \"--path\",\n            input\n        ];\n        const proc = (0,child_process__WEBPACK_IMPORTED_MODULE_3__.spawn)(\"python\", [\n            script,\n            ...args\n        ]);\n        let data = \"\";\n        proc.stdout.on(\"data\", (chunk)=>data += chunk.toString());\n        proc.stderr.on(\"data\", (err)=>console.error(\"Python error:\", err.toString()));\n        proc.on(\"close\", ()=>{\n            try {\n                resolve(JSON.parse(data));\n            } catch  {\n                reject(\"Failed to parse embedding from Python\");\n            }\n        });\n    });\n}\n// Helper: rank products by similarity\nfunction rankSimilarities(queryEmb, embeddings, products) {\n    const scores = embeddings.map((item, i)=>({\n            ...products[i],\n            score: cosineSimilarity(queryEmb, item.embedding)\n        }));\n    return scores.sort((a, b)=>b.score - a.score).slice(0, 10);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVE7UUFDekRGLEtBQUtHLE1BQU0sQ0FBQ1YsRUFBRSxDQUFDLFFBQVEsQ0FBQ2IsTUFBUVcsUUFBUTVCLEtBQUssQ0FBQyxpQkFBaUJpQixJQUFJc0IsUUFBUTtRQUUzRUYsS0FBS1AsRUFBRSxDQUFDLFNBQVM7WUFDZixJQUFJO2dCQUNGZixRQUFRL0MsS0FBS3VDLEtBQUssQ0FBQ3NCO1lBQ3JCLEVBQUUsT0FBTTtnQkFDTmIsT0FBTztZQUNUO1FBQ0Y7SUFDRjtBQUNGO0FBRUEsc0NBQXNDO0FBQ3RDLFNBQVNVLGlCQUFpQmUsUUFBUSxFQUFFbkMsVUFBVSxFQUFFRyxRQUFRO0lBQ3RELE1BQU1pQyxTQUFTcEMsV0FBV3FDLEdBQUcsQ0FBQyxDQUFDQyxNQUFNdEQsSUFBTztZQUMxQyxHQUFHbUIsUUFBUSxDQUFDbkIsRUFBRTtZQUNkdUQsT0FBTzlELGlCQUFpQjBELFVBQVVHLEtBQUtyQixTQUFTO1FBQ2xEO0lBQ0EsT0FBT21CLE9BQU9JLElBQUksQ0FBQyxDQUFDOUQsR0FBR0MsSUFBTUEsRUFBRTRELEtBQUssR0FBRzdELEVBQUU2RCxLQUFLLEVBQUVFLEtBQUssQ0FBQyxHQUFHO0FBQzNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmlzdWFsLXByb2R1Y3QtbWF0Y2hlci8uL3BhZ2VzL2FwaS9tYXRjaC5qcz9mZTc3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL2FwaS9tYXRjaC5qc1xyXG4vLyBBZGQgbmVhciB0aGUgdG9wIG9mIC9wYWdlcy9hcGkvbWF0Y2guanNcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEVtYmVkZGluZ0Zyb21IdWdnaW5nRmFjZShpbWFnZVVybCkge1xyXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCJodHRwczovL2FwaS1pbmZlcmVuY2UuaHVnZ2luZ2ZhY2UuY28vcGlwZWxpbmUvZmVhdHVyZS1leHRyYWN0aW9uL29wZW5haS9jbGlwLXZpdC1iYXNlLXBhdGNoMzJcIiwge1xyXG4gICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7cHJvY2Vzcy5lbnYuSFVHR0lOR0ZBQ0VfVE9LRU59YCB9LFxyXG4gICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgaW5wdXRzOiBpbWFnZVVybCB9KSxcclxuICB9KTtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0KSkgcmV0dXJuIHJlc3VsdFswXTsgLy8gbm9ybWFsaXplZCBlbWJlZGRpbmdcclxuICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGVtYmVkZGluZyByZXNwb25zZVwiKTtcclxufVxyXG5cclxuaW1wb3J0IGZvcm1pZGFibGUgZnJvbSBcImZvcm1pZGFibGVcIjtcclxuaW1wb3J0IGZzIGZyb20gXCJmcy9wcm9taXNlc1wiO1xyXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xyXG5pbXBvcnQgeyBzcGF3biB9IGZyb20gXCJjaGlsZF9wcm9jZXNzXCI7XHJcblxyXG4vLyBEaXNhYmxlIE5leHQuanMgZGVmYXVsdCBib2R5IHBhcnNlclxyXG5leHBvcnQgY29uc3QgY29uZmlnID0geyBhcGk6IHsgYm9keVBhcnNlcjogZmFsc2UgfSB9O1xyXG5cclxuLy8gSGVscGVyOiBjb3NpbmUgc2ltaWxhcml0eSBiZXR3ZWVuIDIgdmVjdG9yc1xyXG5mdW5jdGlvbiBjb3NpbmVTaW1pbGFyaXR5KGEsIGIpIHtcclxuICBjb25zdCBkb3QgPSBhLnJlZHVjZSgoc3VtLCBhaSwgaSkgPT4gc3VtICsgYWkgKiBiW2ldLCAwKTtcclxuICBjb25zdCBub3JtQSA9IE1hdGguc3FydChhLnJlZHVjZSgoc3VtLCBhaSkgPT4gc3VtICsgYWkgKiBhaSwgMCkpO1xyXG4gIGNvbnN0IG5vcm1CID0gTWF0aC5zcXJ0KGIucmVkdWNlKChzdW0sIGJpKSA9PiBzdW0gKyBiaSAqIGJpLCAwKSk7XHJcbiAgcmV0dXJuIGRvdCAvIChub3JtQSAqIG5vcm1CKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSBcIlBPU1RcIilcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiBcIk9ubHkgUE9TVCBtZXRob2QgYWxsb3dlZFwiIH0pO1xyXG5cclxuICBjb25zdCBjb250ZW50VHlwZSA9IHJlcS5oZWFkZXJzW1wiY29udGVudC10eXBlXCJdIHx8IFwiXCI7XHJcblxyXG4gIC8vIExvYWQgcHJlY29tcHV0ZWQgZW1iZWRkaW5nc1xyXG4gIGNvbnN0IGVtYmVkZGluZ3NQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIFwiZGF0YVwiLCBcImVtYmVkZGluZ3MuanNvblwiKTtcclxuICBjb25zdCBwcm9kdWN0c1BhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJkYXRhXCIsIFwicHJvZHVjdHMuanNvblwiKTtcclxuICBjb25zdCBlbWJlZGRpbmdzID0gSlNPTi5wYXJzZShhd2FpdCBmcy5yZWFkRmlsZShlbWJlZGRpbmdzUGF0aCwgXCJ1dGY4XCIpKTtcclxuICBjb25zdCBwcm9kdWN0cyA9IEpTT04ucGFyc2UoYXdhaXQgZnMucmVhZEZpbGUocHJvZHVjdHNQYXRoLCBcInV0ZjhcIikpO1xyXG5cclxuICAvLyBIYW5kbGUgZmlsZSB1cGxvYWRcclxuICBpZiAoY29udGVudFR5cGUuaW5jbHVkZXMoXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIpKSB7XHJcbiAgICBjb25zdCBmb3JtID0gbmV3IGZvcm1pZGFibGUuSW5jb21pbmdGb3JtKCk7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGZpbGVzIH0gPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgZm9ybS5wYXJzZShyZXEsIChlcnIsIGZpZWxkcywgZmlsZXMpID0+IHtcclxuICAgICAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgZWxzZSByZXNvbHZlKHsgZmlsZXMgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgZmlsZSA9IGZpbGVzLmltYWdlWzBdIHx8IGZpbGVzLmltYWdlO1xyXG4gICAgICBjb25zdCB0ZW1wUGF0aCA9IGZpbGUuZmlsZXBhdGg7XHJcblxyXG4gICAgICAvLyBSdW4gUHl0aG9uIHNjcmlwdCB0byBnZXQgZW1iZWRkaW5nIGZvciB1cGxvYWRlZCBpbWFnZVxyXG4gICAgICBjb25zdCBlbWJlZGRpbmcgPSBhd2FpdCBnZXRQeXRob25FbWJlZGRpbmcodGVtcFBhdGgpO1xyXG5cclxuICAgICAgLy8gQ29tcGFyZSB3aXRoIGRhdGFzZXRcclxuICAgICAgY29uc3QgcmVzdWx0cyA9IHJhbmtTaW1pbGFyaXRpZXMoZW1iZWRkaW5nLCBlbWJlZGRpbmdzLCBwcm9kdWN0cyk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyByZXN1bHRzIH0pO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJGYWlsZWQgdG8gcHJvY2VzcyB1cGxvYWRcIiB9KTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgLy8gSGFuZGxlIGltYWdlIFVSTFxyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgIGxldCBkYXRhID0gXCJcIjtcclxuICAgICAgcmVxLm9uKFwiZGF0YVwiLCAoY2h1bmspID0+IChkYXRhICs9IGNodW5rKSk7XHJcbiAgICAgIHJlcS5vbihcImVuZFwiLCAoKSA9PiByZXNvbHZlKEpTT04ucGFyc2UoZGF0YSB8fCBcInt9XCIpKSk7XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHsgaW1hZ2VVcmwgfSA9IGJvZHk7XHJcbiAgICBpZiAoIWltYWdlVXJsKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJpbWFnZVVybCBtaXNzaW5nXCIgfSk7XHJcblxyXG4gICAgY29uc3QgZW1iZWRkaW5nID0gYXdhaXQgZ2V0RW1iZWRkaW5nRnJvbUh1Z2dpbmdGYWNlKGltYWdlVXJsKTtcclxuXHJcbiAgICBjb25zdCByZXN1bHRzID0gcmFua1NpbWlsYXJpdGllcyhlbWJlZGRpbmcsIGVtYmVkZGluZ3MsIHByb2R1Y3RzKTtcclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyByZXN1bHRzLCBxdWVyeUltYWdlOiBpbWFnZVVybCB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEhlbHBlcjogc3Bhd24gUHl0aG9uIHRvIGNvbXB1dGUgcXVlcnkgZW1iZWRkaW5nXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFB5dGhvbkVtYmVkZGluZyhpbnB1dCwgaXNVcmwgPSBmYWxzZSkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCBzY3JpcHQgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJweXRob25fZW1iZWRfcXVlcnkucHlcIik7XHJcbiAgICBjb25zdCBhcmdzID0gaXNVcmwgPyBbXCItLXVybFwiLCBpbnB1dF0gOiBbXCItLXBhdGhcIiwgaW5wdXRdO1xyXG4gICAgY29uc3QgcHJvYyA9IHNwYXduKFwicHl0aG9uXCIsIFtzY3JpcHQsIC4uLmFyZ3NdKTtcclxuXHJcbiAgICBsZXQgZGF0YSA9IFwiXCI7XHJcbiAgICBwcm9jLnN0ZG91dC5vbihcImRhdGFcIiwgKGNodW5rKSA9PiAoZGF0YSArPSBjaHVuay50b1N0cmluZygpKSk7XHJcbiAgICBwcm9jLnN0ZGVyci5vbihcImRhdGFcIiwgKGVycikgPT4gY29uc29sZS5lcnJvcihcIlB5dGhvbiBlcnJvcjpcIiwgZXJyLnRvU3RyaW5nKCkpKTtcclxuXHJcbiAgICBwcm9jLm9uKFwiY2xvc2VcIiwgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZShkYXRhKSk7XHJcbiAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgIHJlamVjdChcIkZhaWxlZCB0byBwYXJzZSBlbWJlZGRpbmcgZnJvbSBQeXRob25cIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBIZWxwZXI6IHJhbmsgcHJvZHVjdHMgYnkgc2ltaWxhcml0eVxyXG5mdW5jdGlvbiByYW5rU2ltaWxhcml0aWVzKHF1ZXJ5RW1iLCBlbWJlZGRpbmdzLCBwcm9kdWN0cykge1xyXG4gIGNvbnN0IHNjb3JlcyA9IGVtYmVkZGluZ3MubWFwKChpdGVtLCBpKSA9PiAoe1xyXG4gICAgLi4ucHJvZHVjdHNbaV0sXHJcbiAgICBzY29yZTogY29zaW5lU2ltaWxhcml0eShxdWVyeUVtYiwgaXRlbS5lbWJlZGRpbmcpLFxyXG4gIH0pKTtcclxuICByZXR1cm4gc2NvcmVzLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKS5zbGljZSgwLCAxMCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbImdldEVtYmVkZGluZ0Zyb21IdWdnaW5nRmFjZSIsImltYWdlVXJsIiwicmVzcG9uc2UiLCJmZXRjaCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwicHJvY2VzcyIsImVudiIsIkhVR0dJTkdGQUNFX1RPS0VOIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJpbnB1dHMiLCJyZXN1bHQiLCJqc29uIiwiQXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJmb3JtaWRhYmxlIiwiZnMiLCJwYXRoIiwic3Bhd24iLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwiY29zaW5lU2ltaWxhcml0eSIsImEiLCJiIiwiZG90IiwicmVkdWNlIiwic3VtIiwiYWkiLCJpIiwibm9ybUEiLCJNYXRoIiwic3FydCIsIm5vcm1CIiwiYmkiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic3RhdHVzIiwiZXJyb3IiLCJjb250ZW50VHlwZSIsImVtYmVkZGluZ3NQYXRoIiwiam9pbiIsImN3ZCIsInByb2R1Y3RzUGF0aCIsImVtYmVkZGluZ3MiLCJwYXJzZSIsInJlYWRGaWxlIiwicHJvZHVjdHMiLCJpbmNsdWRlcyIsImZvcm0iLCJJbmNvbWluZ0Zvcm0iLCJmaWxlcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZXJyIiwiZmllbGRzIiwiZmlsZSIsImltYWdlIiwidGVtcFBhdGgiLCJmaWxlcGF0aCIsImVtYmVkZGluZyIsImdldFB5dGhvbkVtYmVkZGluZyIsInJlc3VsdHMiLCJyYW5rU2ltaWxhcml0aWVzIiwiZSIsImNvbnNvbGUiLCJkYXRhIiwib24iLCJjaHVuayIsInF1ZXJ5SW1hZ2UiLCJpbnB1dCIsImlzVXJsIiwic2NyaXB0IiwiYXJncyIsInByb2MiLCJzdGRvdXQiLCJ0b1N0cmluZyIsInN0ZGVyciIsInF1ZXJ5RW1iIiwic2NvcmVzIiwibWFwIiwiaXRlbSIsInNjb3JlIiwic29ydCIsInNsaWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/match.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmatch&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cmatch.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();